<link rel="import" href="../geohash-js/geohash-js.html">
<link rel="import" href="../iron-ajax/iron-ajax.html">

  <dom-module id="geo-hash-data">

    <template>
      <iron-ajax url="{{input}}" last-response="{{data}}" auto></iron-ajax>
    </template>
    
    <script>
      
(function() {
  Polymer({
    is: 'geo-hash-data',
    properties: {
      output: {
        computed: "process(data)"
      },
      input: {
        type: String,
        value: "https://essentialhotels.co.uk/index.json"
      }
    },
    process: function(data) {
      var output = {};
      //
      if (data != null) {
        Object.keys(data).forEach(function(key) {
          console.log(key, data[key]);
          if (data[key].hasOwnProperty("latlng")) { 
            
            console.log(key, data[key].latlng);
            var latlng = data[key].latlng.split(",");
            console.log(key, latlng[0]);
            console.log(key, latlng[1]);
            var lat = latlng[0];
            var lng = latlng[1];
            
            console.log(encodeGeoHash(+lng, +lat));
          }
        });
      }
      // encodeGeoHash(+lng, +lat);
      return output;
    }
  });
})();
    </script>
  </dom-module>
